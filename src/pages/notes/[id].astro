---
import Base from "@layouts/Base.astro";
import Header from "@components/notes/Header.astro";
import { components } from "@components/global";

import "@styles/_note.scss";

import { getCollection, render } from "astro:content";
// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const notes = await getCollection("notes");
  return notes.map((note) => ({
    params: { id: note.id },
    props: { note },
  }));
}
// 2. For your template, you can get the entry directly from the prop
const { note } = Astro.props;
const { Content } = await render(note);

const tags = note.data.tags?.sort((a, b) => a.localeCompare(b)) || [];
---

<Base title={note.data.title} description={note.data.description}>
  <article data-pagefind-body>
    <Header note={note}/>
  </article>
  <div class="body">
    <Content components={components} />
  </div>
</Base>

<style>
  .body {
    max-width: 60rem;
  }
</style>

<style lang="scss" is:global>
  .body {
    ul,
    ol {
      display: grid;
      gap: 0.5em;
    }
  }
</style>
